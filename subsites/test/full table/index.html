<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All Workout Data</title>
    <style>
        body {
            background-color: black;
            color: #FFD700;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        table {
            margin-top: 20px;
            border-collapse: collapse;
            width: 80%;
        }
        th, td {
            border: 1px solid #FFD700;
            padding: 10px;
            text-align: center;
        }
    </style>
</head>
<body>
    <table id="combinedData">
        <thead>
            <tr>
                <th>Date</th>
                <th>Page</th>
                <th>Set</th>
                <th>Reps</th>
                <th>Weight</th>
            </tr>
        </thead>
        <tbody id="combinedDataBody"></tbody>
    </table>

    <script>
        const pageIdentifiers = [
            "Barbell Bench", // Add more page identifiers here
            "Dumbbell Bench",
            "Smith Machine Bench",
            "Barbell Incline",
            "Dumbbell Incline",
            "Smith Machine Incline",
            "Barbell Decline Bench",
            "Pec-Deck Flies",
            "Incline Cable Flies",
            "Flat Cable Flies",
            "Decline Cable Flies",
            "Incline Dumbbell Flies",
            "Flat Dumbbell Flies",
            "Seated Incline Cable Flies",
            "Seated Flat Cable Flies",
            "Incline Chest Machine",
            "Flat Chest Machine",
            "Decline Chest Machine",
            "Squat",
            "Deadlift"
        ];

        function loadAllData() {
            const combinedDataBody = document.getElementById("combinedDataBody");

            // Iterate through all pageIdentifiers
            pageIdentifiers.forEach(pageIdentifier => {
                const savedDataKey = `workoutData_${pageIdentifier}`;
                const savedData = JSON.parse(localStorage.getItem(savedDataKey)) || [];

                savedData.forEach(entry => {
                    const rows = entry.data;
                    const currentDate = entry.date;

                    // Add each row from the saved data to the table
                    const wrappedHtml = `<table><tbody>${rows}</tbody></table>`;
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(wrappedHtml, 'text/html');
                    const rowsInData = doc.querySelectorAll('tr');

                    rowsInData.forEach(row => {
                        const cells = row.querySelectorAll('td');
                        const set = cells[2].textContent;
                        const reps = cells[3].textContent;
                        const weight = cells[4].textContent;

                        // Append each row to the combined table without the Select column
                        combinedDataBody.innerHTML += `<tr>
                            <td>${currentDate}</td>
                            <td>${pageIdentifier}</td>
                            <td>${set}</td>
                            <td>${reps}</td>
                            <td>${weight}</td>
                        </tr>`;
                    });
                });
            });
        }

        document.addEventListener("DOMContentLoaded", loadAllData);
    </script>
</body>
</html>
